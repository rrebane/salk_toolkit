{
    "file": "salk25.sav",
    "constants": {
        "districts": {
            "Tallinn": "Tallinn",
            "Harjumaa (välja arvatud Tallinn)": "Harju- ja Raplamaa",
            "Harjumaa": "Harju- ja Raplamaa",
            "Läänemaa": "Hiiu-, Lääne- ja Saaremaa",
            "Hiiumaa": "Hiiu-, Lääne- ja Saaremaa",
            "Pärnumaa": "Pärnumaa",
            "Võrumaa": "Võru-, Valga- ja Põlvamaa",
            "Ida-Virumaa": "Ida-Virumaa",
            "Tartumaa": "Jõgeva- ja Tartumaa",
            "Järvamaa": "Järva- ja Viljandimaa",
            "Põlvamaa": "Võru-, Valga- ja Põlvamaa",
            "Valgamaa": "Võru-, Valga- ja Põlvamaa",
            "Viljandimaa": "Järva- ja Viljandimaa",
            "Raplamaa": "Harju- ja Raplamaa",
            "Jõgevamaa": "Jõgeva- ja Tartumaa",
            "Lääne-Virumaa": "Lääne-Virumaa",
            "Saaremaa": "Hiiu-, Lääne- ja Saaremaa",
            "Haabersti": "Haabersti, Põhja-Tallinn ja Kristiine",
            "Põhja-Tallinn": "Haabersti, Põhja-Tallinn ja Kristiine",
            "Kristiine": "Haabersti, Põhja-Tallinn ja Kristiine",
            "Kesklinn": "Kesklinn, Lasnamäe ja Pirita",
            "Lasnamäe": "Kesklinn, Lasnamäe ja Pirita",
            "Pirita": "Kesklinn, Lasnamäe ja Pirita",
            "Mustamäe": "Mustamäe ja Nõmme",
            "Nõmme": "Mustamäe ja Nõmme",
            "Tartu linn": "Tartu linn"
        },
        "party_colors": {
            "EKRE": "#8B4513",
            "Eesti 200": "#31758A",
            "Isamaa": "#009BDF",
            "Keskerakond": "#007557",
            "Reformierakond": "#FFE200",
            "Rohelised": "#88AF47",
            "SDE": "#E10600",
            "Parempoolsed": "orange",
            "No party": "grey",
            "Hard to say": "lightgrey",
            "Other": "lightgrey"
        },

"reverse_questions": ["2a","3a","4a","7a","8a","9a","10a","11a","12a", "14a", "16a", "17a", "18a", "19a"],
        "long_questions": {
             "Q7_allr1": "Minu meelest tuleks rohkem küsimusi otsustada rahvahääletuse teel.",
             "Q7_allr2": "Minu meelest tehakse liiga palju Eesti jaoks olulisi otsuseid Euroopa Liidu tasandil.",
             "Q7_allr2a": "Minu meelest ei otsusta Euroopa Liit liiga palju Eesti asjade üle. (pööratud)",
             "Q7_allr3": "Minu meelest parandab NATO liitlasvägede suurem kohalolu Eesti julgeolekut.",
             "Q7_allr3a": "Minu meelest toob NATO liitlasvägede suurem kohalolu Eestis kaasa rohkem riske kui kasu. (pööratud)",
             "Q7_allr4": "Minu meelest on Ukraina toetamine sõjas Venemaaga sama tähtis kui siseriiklike probleemide lahendamine.",
             "Q7_allr4a": "Minu meelest on siseriiklike probleemidega tegelemine olulisem kui Ukraina toetamine sõjas Venemaaga. (pööratud)",
             "Q7_allr5": "Minu meelest tuleks Eestil üle minna ühtsele eestikeelsele haridussüsteemile.",
             "Q7_allr6": "Minu meelest peaks jõukamate inimeste panus riigi ülalpidamisse tulumaksu või teiste maksude näol olema senisest suurem.",
             "Q7_allr6a": "Minu meelest tuleks Eestis kasutusele võtta astmeline tulumaks.",
             "Q7_allr7": "Minu meelest tuleb riigi kulutusi kärpida.",
             "Q7_allr7a": "Minu meelest tuleks praegu riigi kulutuste kärpimisest hoiduda. (pööratud)",
             "Q7_allr8": "Minu meelest arvestab riik piisavalt minu linna/valla vajadustega.",
             "Q7_allr8a": "Minu meelest ei arvesta riik minu linna/valla vajadustega. (pööratud)",
             "Q7_allr9": "Minu meelest peaks riik tegema rohkem kliimamuutuse pidurdamiseks.",
             "Q7_allr9a": "Minu meelest ei peaks riik kliimamuutuse pidurdamisega tegelema. (pööratud)",
             "Q7_allr10": "Minu meelest peaks Eesti kiirendama üleminekut taastuvenergiale.",
             "Q7_allr10a": "Minu meelest peaks Eesti jätkama põlevkivienergia kasutamist ka tulevikus. (pööratud)",
             "Q7_allr11": "Minu meelest tuleks Eestisse ehitada tuumajaam.",
             "Q7_allr11a": "Minu meelest peaks tuumajaama Eestisse rajamisest hoiduma. (pööratud)",
             "Q7_allr12": "Minu meelest tuleks metsade raiet vähendada.",
             "Q7_allr12a": "Minu meelest võiks metsade raiega jätkata senises mahus. (pööratud)",
             "Q7_allr13": "Minu meelest on automaksu kehtestamine vajalik.",
             "Q7_allr13a": "Minu meelest peaks automaksuga suunama inimesi kasutama vähem saastavat transporti.",
             "Q7_allr14": "Minu meelest on E-valimised usaldusväärsed.",
             "Q7_allr14a": "Minu meelest ei saa E-valimisi usaldada. (pööratud)",
             "Q7_allr15": "Minu meelest peaks sündimuse tõstmiseks maksma senisest suuremaid rahalisi toetusi.",
             "Q7_allr15a": "Minu meelest on õigustatud maksta oluliselt suuremaid toetusi alates kolmandast lapsest võrreldes esimese kahe lapsega, et sünniks rohkem lapsi.",
             "Q7_allr16": "Minu meelest peaks samast soost paaridel olema õigus abielluda.",
             "Q7_allr16a": "Minu meelest peaks abielu jääma ainult mehe ja naise vaheliseks liiduks. (pööratud)",
             "Q7_allr17": "Minu meelest tuleks abortide riiklik rahastamine Eestis lõpetada.",
             "Q7_allr17a": "Minu meelest on abordi tegemine iga naise isiklik otsus. (pööratud)",
             "Q7_allr18": "Minu meelest tuleks sisserännet Eestisse senisest enam piirata.",
             "Q7_allr18a": "Minu meelest peaks sisserände piirangute karmistamisest hoiduma. (pööratud)",
             "Q7_allr19": "Minu meelest on sõnavabaduse piiramine avalikus ruumis õigustatud, kui see ohustab mõnda vähemust (nt üleskutsed füüsilisele vägivallale).",
             "Q7_allr19a": "Minu meelest tuleb tagada täielik sõnavabadus avalikus ruumis isegi siis, kui see ohustab mõnda vähemust (nt üleskutsed füüsilisele vägivallale). (pööratud)",
             "Q8": "Kui tihti Te jälgite seda, mis toimub poliitikas?",
             "Q8a": "Mil määral tunnete huvi poliitika vastu?"
        },
        "multicol_questions": ["Q8", "Q7_allr2", "Q7_allr3", "Q7_allr4", "Q7_allr6", "Q7_allr7", "Q7_allr8", "Q7_allr9", "Q7_allr10", "Q7_allr11", "Q7_allr12", "Q7_allr13", "Q7_allr14", "Q7_allr15", "Q7_allr16", "Q7_allr17", "Q7_allr18", "Q7_allr19"],
        "reverse_questions": ["2a","3a","4a","7a","8a","9a","10a","11a","12a", "14a", "16a", "17a", "18a", "19a"],
        "ee_likert_scale": [ "Üldse ei nõustu", "Pigem ei ole nõus", "Ei oska öelda", "Pigem nõus", "Täiesti nõus"]
    },
    "preprocessing": "df.drop(columns=['Q8_least'],inplace=True); [ stk.utils.multicol_to_vals_cats(df, col_prefix=qn, reverse_suffixes=reverse_questions, cat_order=ee_likert_scale, vals_name=f'{qn}v', cats_name=f'{qn}c', inplace=True) for qn in multicol_questions ]; df['T6']=df['T6'].astype('str'); df.loc[df.D4 == 'Tartu linn', 'T6'] = 'Tartu linn'; df.loc[df.D4 == 'Tallinn (L)', 'T6'] = df.D4b",
    "structure": [{
        "name": "meta",
        "columns": [
            ["date", { "transform": "pd.to_datetime(s)" }]
        ]
    }, {
        "name": "demographics",
        "columns": [
            "age",
            ["age_group", "age_group2", { "categories": ["18-24", "25-34", "35-44", "45-54", "55-64", "65-74", "75+"],    "ordered":     true    }],
            ["education", "T8", {
                "categories": ["Basic education", "Secondary education", "Higher education"], "ordered":     true,
                "translate": { "Alg- või põhiharidus, kutseharidus põhikooli baasil": "Basic education", "Kesk- või kutsekeskharidus": "Secondary education", "Kõrgharidus": "Higher education" }
            }],
            ["gender", {
                "categories": ["Male", "Female"],
                "translate": {    "Mees": "Male",    "Naine": "Female" }
            }],
            ["nationality", "T3c", {
                "categories": ["Estonian", "Other"],
                "translate": { "Eestlane": "Estonian", "Muu": "Other", "Venelane": "Other" }
            }],
            ["electoral_district", "T6", { "categories": "infer", "translate": "districts" }],
            ["unit", "T6", { "categories": "infer", "translate": { "Harjumaa (välja arvatud Tallinn)": "Harjumaa" }    }],
            ["citizen", "K0", {    "transform": "s=='Jah'" }]
        ]
    }, {
        "name": "wedge",
        "scale": {
            "categories": ["Strongly disagree", "Disagree", "Neither agree nor disagree", "Agree", "Strongly agree"],    "ordered": true, "likert": true,
            "translate": { "Ei oska öelda": "Neither agree nor disagree", "Täiesti nõus": "Strongly agree", "Üldse ei nõustu": "Strongly disagree", "Pigem nõus": "Agree", "Pigem ei ole nõus": "Disagree" }
        },
        "columns": [
            ["e-valimised", "Q7_allr14v", { "modifiers": ["e-valimised c"] }],
            ["rahvahääletus", "Q7_allr1"],
            ["sisseränne", "Q7_allr18v", { "modifiers": ["sisseränne c"] }],
            ["Euroopa Liit", "Q7_allr2v", { "modifiers": ["Euroopa Liit c"] }],
            ["eestikeelne haridus", "Q7_allr5"],
            ["kliimamuutus", "Q7_allr9v", { "modifiers": ["kliimamuutus c"] }],
            ["metsaraie", "Q7_allr12v", { "modifiers": ["metsaraie c"] }],
            ["kooselu", "Q7_allr16v", { "modifiers": ["kooselu c"] }],
            ["abort", "Q7_allr17v", { "modifiers": ["abort c"] }],
            ["sõnavabadus", "Q7_allr19v", { "modifiers": ["sõnavabadus c"] }],
            ["maksud", "Q7_allr6v", { "modifiers": ["maksud c"] }],
            ["NATO", "Q7_allr3v", { "modifiers": ["NATO c"] }],
            ["ukraina","Q7_allr4v", { "modifiers": ["ukraina c"] }],
            ["kärped","Q7_allr7v", { "modifiers": ["kärped c"] }],
            ["kohalik","Q7_allr8v", { "modifiers": ["kohalik c"] }],
            ["taastuvenergia","Q7_allr10v", { "modifiers": ["taastuvenergia c"] }],
            ["tuumajaam","Q7_allr11v", { "modifiers": ["tuumajaam c"] }],
            ["automaks","Q7_allr13v", { "modifiers": ["automaks c"] }],
            ["lastetoetused","Q7_allr15v", { "modifiers": ["lastetoetused c"] }]
        ]
    }, {
        "name": "trust",
        "scale": {
            "categories": ["Don't trust at all", "Rather not trust", "Hard to say", "Rather trust", "Trust completely"], "ordered": true, "likert": true,
            "translate": { "Ei oska öelda": "Hard to say", "Pigem ei usalda": "Rather not trust", "Usaldan täiesti": "Trust completely", "Pigem usaldan": "Rather trust", "Üldse ei usalda": "Don't trust at all" }
        },
        "columns": [
            ["valitsus", "Q3r1"],
            ["riigikogu", "Q3r2"],
            ["ajakirjandus", "Q3r4"]
        ]
    }, {
        "name": "voting_behavior",
        "columns": [
            ["party_preference", "Q4r1", {
                "categories": ["Keskerakond", "EKRE", "Reformierakond", "Isamaa", "SDE", "Rohelised", "Eesti 200", "Parempoolsed", "No party", "Other", "Hard to say"],
                "translate": { "Eesti Keskerakond": "Keskerakond", "Eesti Reformierakond": "Reformierakond", "Eesti Konservatiivne Rahvaerakond (EKRE)": "EKRE", "Isamaa Erakond": "Isamaa", "Erakond Eesti 200": "Eesti 200", "Sotsiaaldemokraatlik Erakond": "SDE", "Erakond Eestimaa Rohelised": "Rohelised", "Erakond Parempoolsed": "Parempoolsed", "Muu":"Other", "Mitte ükski erakond": "No party", "Ei oska öelda": "Hard to say"  },
                "colors": "party_colors"
            }],
            ["voting_intent", "Q5", {
                "categories": ["No", "No opinion", "Yes"], "ordered": true,
                "translate": { "Ei": "No", "Ei soovi avaldada": "No opinion", "Jah": "Yes" }
            }],
            ["interest", "Q8v", {
                "categories": ["Almost not at all", "A little", "Somewhat", "A lot"], "ordered": true,
                "translate": { "Aeg-ajalt": "Somewhat", "Harva": "A little", "Peaaegu üldse mitte": "Almost not at all", "Suurema osa ajast": "A lot", "Mõnevõrra":"Somewhat", "Palju":"A lot", "Peaaegu üldse mitte":"Almost not at all", "Pigem vähe":"A little"}
            }]
        ]
    }, {
        "name": "thermometer",
        "scale": {
            "translate": { "0 - täiesti negatiivne": 0, "5 – neutraalne (või ükskõikne)": 5 , "10 – väga positiivne": 10}, "transform": "s.astype(int)",
            "transform": "s.astype('int')-5",
            "question_colors": "party_colors"
        },
        "columns": [
            ["Keskerakond","Q4ax1r1"],
            ["EKRE","Q4ax1r2"],
            ["Reformierakond","Q4ax1r3"],
            ["Isamaa","Q4ax1r4"],
            ["SDE","Q4ax1r5"],
            ["Rohelised","Q4ax1r6"],
            ["Eesti 200","Q4ax1r7"],
            ["Parempoolsed","Q4ax1r8"]
        ]
    }, {
        "name": "extras",
        "columns": [
            ["income", "T10", {
                "categories": ["No opinion", "<500 €", "501-1000 €", "1001-1500 €", "1501-2000 €", ">2000 €"], "ordered":     true,
                "translate": { "Ei soovi avaldada": "No opinion", "Ei tea": "No opinion", "Kuni 500 €": "<500 €", "Üle 2000 €": ">2000 €" }
            }],
            ["children", "T5", {
                "categories": ["No opinion", "0", "1", "2", "3+"],    "ordered":     true,
                "translate": {    "Ei soovi avaldada": "No opinion", "Ei ole lapsi": "0", "1 laps": "1",    "2 last": "2", "3 või rohkem last": "3+" }
            }],
            ["occupation", "T9", {
                "categories": "infer",
                "translate": { "Õpilane või üliõpilane": "Student",    "Tööline": "Worker", "Juht": "Manager",    "Töötu, tööd otsiv": "Unemployed, looking for work", "Spetsialist": "Specialist", "Ettevõtja või füüsilisest isikust ettevõtja (FIE)": "Entrepreneur or self-employed person (FIE)", "Kodune või mittetöötav": "Domestic or non-working", "Pensionär": "Pensioner" }
            }]
        ]
    }, {
        "name": "wedge_variants",
        "hidden": true,
        "scale": { "categories": "infer", "translate": "long_questions" },
        "columns": [
            ["interest c","Q8a"],
            ["e-valimised c", "Q7_allr14c"],
            ["sisseränne c", "Q7_allr18c"],
            ["Euroopa Liit c", "Q7_allr2c"],
            ["kliimamuutus c", "Q7_allr9c"],
            ["metsaraie c", "Q7_allr12c"],
            ["kooselu c", "Q7_allr16c"],
            ["abort c", "Q7_allr17c"],
            ["sõnavabadus c", "Q7_allr19c"],
            ["maksud c", "Q7_allr6c"],
            ["NATO c", "Q7_allr3c"],
            ["ukraina c","Q7_allr4c"],
            ["kärped c","Q7_allr7c"],
            ["kohalik c","Q7_allr8c"],
            ["taastuvenergia c","Q7_allr10c"],
            ["tuumajaam c","Q7_allr11c"],
            ["automaks c","Q7_allr13c"],
            ["lastetoetused c","Q7_allr15c"]
        ]
    }]
}