{
    "files": [
        "master_meta.json",
        { "file": "salk25_meta.json", "wave": 25 }
    ],
    "constants": {
        "party_colors": {
            "EKRE": "#8B4513",
            "Eesti 200": "#31758A",
            "Isamaa": "#009BDF",
            "Keskerakond": "#007557",
            "Reformierakond": "#FFE200",
            "Rohelised": "#88AF47",
            "SDE": "#E10600",
            "Parempoolsed": "orange",
            "None of the parties": "grey",
            "No opinion": "lightgrey",
            "Other": "lightgrey"
        }
    },
    "structure": [
    {
        "name": "internals",
        "columns": [
            ["t", "wave", { "transform": "s.replace(dict(((df.groupby('wave')['date'].apply(lambda s: pd.to_datetime(s).median() ) - pd.to_datetime('2023-03-05')).dt.days/30).items()))"    }],
            ["date", { "transform": "pd.to_datetime(s)" }],
            ["weight", { "continuous":true }]
        ],
        "hidden": true
    }, {
        "name": "survey",
        "columns": [
            ["methods"],
            ["wave"]
        ]
    }, {
        "name": "demographics",
        "columns": [
            ["age",{"continuous":true}],
            ["age_group", { 
                "categories": ["16-24", "25-34", "35-44", "45-54", "55-64", "65-74", "75+"],    "ordered": true ,
                "num_values": [20,30,40,50,60,70,80]
            }],
            ["education", {
                "categories": ["Basic education", "Secondary education", "Higher education"], "ordered": true,
                "translate": { "Põhiharidus": "Basic education", "Keskharidus": "Secondary education", "Kõrgharidus": "Higher education" }
            }],
            ["gender", {
                "categories": ["Male", "Female"],
                "translate": {    "Mees": "Male",    "Naine": "Female" },
                "colors": { "Male": "blue", "Female": "red" }
            }],
            ["nationality", {
                "categories": ["Estonian", "Other"],
                "translate": { "Eestlane": "Estonian", "Muu": "Other", "Venelane": "Other" },
                "colors": { "Estonian": "blue", "Other": "grey" }
            }],
            ["electoral_district", { "categories": "infer", "translate": "districts",
              "topo_feature": ["https://dl.dropboxusercontent.com/scl/fi/ciunedliwyvlafpm5nlos/estonia.topojson?rlkey=0g56uexaos1v59yghmikv09xi&dl=0","data","VNIMI"] }],
            ["unit", { "categories": "infer", "translate": { "Harjumaa (välja arvatud Tallinn)": "Harjumaa" }, 
             "topo_feature": ["https://dl.dropboxusercontent.com/scl/fi/ciunedliwyvlafpm5nlos/estonia.topojson?rlkey=0g56uexaos1v59yghmikv09xi&dl=0","data","MNIMI"] }],
            ["citizen"]
        ]
    }, {
        "name": "wedge",
        "scale": {
            "categories": ["Strongly disagree", "Disagree", "Neither agree nor disagree", "Agree", "Strongly agree"], "ordered": true, "likert": true,
            "num_values": [-2,-1,null,1,2],
            "translate": { "Ei oska öelda": "Neither agree nor disagree", "Täiesti nõus": "Strongly agree", "Üldse ei nõustu": "Strongly disagree", "Pigem nõus": "Agree", "Pigem ei ole nõus": "Disagree" }
        },
        "columns": [
            ["e-valimised"],
            ["rahvahääletus"],
            ["sisseränne"],
            ["Euroopa Liit"],
            ["eestikeelne haridus"],
            ["kliimamuutus"],
            ["metsaraie"],
            ["abieluvõrdsus"],
            ["abort"],
            ["sõnavabadus"],
            ["maksud"],
            ["sündimus"],
            ["NATO"]
        ]
    }, {
        "name": "trust",
        "scale": {
            "categories": ["Completely distrust", "Distrust", "Neither trust nor distrust", "Trust", "Trust completely"], "ordered": true, "likert": true,
            "num_values": [-2,-1,null,1,2],
            "translate": { "Ei oska öelda": "Neither trust nor distrust", "Pigem ei usalda": "Distrust", "Usaldan täiesti": "Trust completely", "Pigem usaldan": "Trust", "Üldse ei usalda": "Completely distrust" }
        },
        "columns": [
            ["valitsus"],
            ["riigikogu"],
            ["meedia"]
        ]
    }, {
        "name": "voting_behavior",
        "columns": [
            ["party_preference", {
                "categories": ["Keskerakond", "EKRE", "Reformierakond", "Isamaa", "SDE", "Rohelised", "Eesti 200", "Parempoolsed", "Other", "None of the parties", "No opinion"],
                "translate": { "Eesti Keskerakond": "Keskerakond", "Eesti Reformierakond": "Reformierakond", "Eesti Konservatiivne Rahvaerakond (EKRE)": "EKRE", "ISAMAA Erakond": "Isamaa", "Erakond Eesti 200": "Eesti 200", "Sotsiaaldemokraatlik Erakond": "SDE", "Erakond Eestimaa Rohelised": "Rohelised", "Erakond Parempoolsed": "Parempoolsed", "Mitte ükski erakond": "None of the parties", "Ei oska öelda": "No opinion", "Muu": "Other" },
                "colors": "party_colors"
            }],
            ["voting_intent", {
                "categories": ["No", "No opinion", "Yes"], "ordered": true,
                "translate": { "Ei": "No", "Ei soovi avaldada": "No opinion", "Jah": "Yes" }
            }]
        ]
    }, {
        "name": "thermometer",
        "scale": { "continuous": true, "question_colors": "party_colors" },
        "columns": ["Keskerakond", "EKRE", "Reformierakond", "Isamaa", "SDE", "Rohelised", "Eesti 200", "Parempoolsed"]
    }, {
        "name": "extras",
        "columns": [
            ["income", {
                "categories": ["No opinion", "<500 €", "501-1000 €", "1001-1500 €", "1501-2000 €", ">2000 €"], "ordered": true,
                "translate": { "Ei soovi avaldada": "No opinion", "Kuni 500 €": "<500 €", "Üle 2000 €": ">2000 €" }
            }],
            ["children", {
                "categories": ["No opinion", "0", "1", "2", "3+"],    "ordered": true,
                "translate": {    "Ei soovi avaldada": "No opinion", "Ei ole lapsi": "0", "1 laps": "1",    "2 last": "2", "3 või rohkem last": "3+" }
            }],
            ["occupation", {
                "categories": "infer",
                "translate": { "Õpilane või üliõpilane": "Student",    "Tööline": "Worker", "Juht": "Manager",    "Töötu, tööd otsiv": "Unemployed, looking for work", "Spetsialist": "Specialist", "Ettevõtja või füüsilisest isikust ettevõtja (FIE)": "Entrepreneur or self-employed person (FIE)", "Kodune või mittetöötav": "Domestic or non-working", "Pensionär": "Pensioner" }
            }]
        ]
    }]
}